!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],e):e(jQuery)}(function(p){"use strict";p.jgrid.extend({transposeSetup:function(r,e){var s=[],c=[],d=!1,l=p.extend({nameprefix:"col",labelprefix:"value ",baseindex:0,beforeCreateGrid:null},e||{});return this.each(function(){for(var e,t,i=Object.keys(r[l.baseindex]),o=0;o<i.length;o++){t=0,(e={}).col_name=i[o],d||s.push({name:"col_name"}),t++;for(var n=0;n<r.length;n++){var a=r[n];e[l.nameprefix+t]=a[i[o]],d||s.push({name:l.nameprefix+t,label:l.labelprefix+t}),t++}d=!0,c.push(e)}}),{colModel:s,rows:c}},jqTranspose:function(o,n,a,r){return this.each(function(){var i=this,e=a&&a.regional?a.regional:"en";function t(e){p.isArray(e)||(e=[]);var t=jQuery(i).jqGrid("transposeSetup",e,n);p.jgrid.isFunction(n.beforeCreateGrid)&&n.beforeCreateGrid.call(i,t);e=p.jgrid.from.call(i,t.rows);jQuery(i).jqGrid(p.extend(!0,{datastr:e.select(),datatype:"jsonstring",colModel:t.colModel,jsonReader:{repeatitems:!1},viewrecords:!0},a||{})),n.loadMsg&&p(".loading_pivot").remove()}void 0===n.loadMsg&&(n.loadMsg=!0),n.loadMsg&&p("<div class='loading_pivot ui-state-default ui-state-active row'>"+p.jgrid.getRegional(i,"regional."+e+".defaults.loadtext")+"</div>").insertBefore(i).show(),"string"==typeof o?p.ajax(p.extend({url:o,dataType:"json",success:function(e){t(p.jgrid.getAccessor(e,r&&r.reader?r.reader:"rows"))}},r||{})):t(o)})},addColSearchMenu:function(){return this.each(function(){var e=this;p(e).colMenuAdd("sc",{title:"Reset",position:"first",id:"reset",funcname:function(){p("input[id^='jqs_']","#"+this.p.id).each(function(e){p(this).val("")}),p(this)[0].p._results={},p(this).jqGrid("showCol",this.p._avc)}}),p(e).colMenuAdd("sc",{separator:!0,id:"groupOp"}),p(e).colMenuAdd("sc",{separator:!0,id:"operOp"}),p(e).colMenuAdd("sc",{separator:!0,id:"close",funcname:function(){return!0}}),p(e).on("jqGridcolMenuBeforeProcess.custom",function(e,t){if("custom"===t.module&&"sc"===t.column){var i,o=p.jgrid.getRegional(this,"search"),n=this.p.searchColOptions,a=p.jgrid.getMethod("getStyleUI"),r=this.p.styleUI+".base";if("reset"===t.action.id&&(t.action.title=o.Reset||"Reset",t.action.icon=a(this.p.styleUI+".colmenu","icon_reset",!0,"")),"close"===t.action.id&&(t.action.title=o.Close||"Close",t.action.icon=a(this.p.styleUI+".colmenu","icon_close",!0,"")),"groupOp"===t.action.id){i=a(r,"searchSelect",!1,"search-col-input"),t.action.title=""+(o.Operand||"Operand: "),t.action.title+="<select data-grid-id="+this.p.id+' id="opselect"  '+i+">",i=a(this.p.styleUI+".colmenu","icon_group_op",!0,""),t.action.icon=i;for(var s=0;s<o.groupOps.length;s++){var c=n.searchOp===o.groupOps[s].op?"selected":"";t.action.title+='<option value="'+o.groupOps[s].op+'" '+c+">"+o.groupOps[s].text+"</option>"}t.action.title+="</select>",setTimeout(function(){p("#opselect").on("change",function(){var e=p("#"+p(this).attr("data-grid-id"))[0];e.p.searchColOptions.searchOp=p(this).val(),p.jgrid.myfunc(e.p.id)})},200)}if("operOp"===t.action.id){i=a(r,"searchSelect",!1,"search-col-input"),t.action.title=o.Operation||"Oper : ",t.action.title+="<select data-grid-id="+this.p.id+' id="selectoper"  '+i+">",i=a(this.p.styleUI+".colmenu","icon_oper_op",!0,""),t.action.icon=i;for(s=0;s<o.odata.length;s++){c=n.operand===o.odata[s].oper?"selected":"";n.aOperands.includes(o.odata[s].oper)&&(t.action.title+='<option value="'+o.odata[s].oper+'" '+c+">"+o.odata[s].text+"</option>")}t.action.title+="</select>",setTimeout(function(){p("#selectoper").on("change",function(){var e=p("#"+p(this).attr("data-grid-id"))[0];e.p.searchColOptions.operand=p(this).val(),p.jgrid.myfunc(e.p.id)})},200)}}})})}})});